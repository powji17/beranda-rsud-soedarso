<header id="main-header" class="flex flex-wrap justify-between items-center mx-auto sticky top-0 z-50 w-full transition-all duration-300">
    
    <style>
        /* 1. Kondisi AWAL (saat di puncak halaman) */
        #main-header {
            padding-top: 0.75rem; /* Sedikit lebih tinggi untuk tampilan awal */
            padding-bottom: 0.75rem;
            
            /* Transparan saat di atas */
            background-color: transparent; 
            
            /* Hilangkan bayangan saat transparan */
            box-shadow: none; 

            /* Efek transisi agar perubahan mulus */
            transition: background-color 0.4s ease-out, box-shadow 0.4s ease-out, padding 0.4s ease-out;
        }

        /* 2. Kondisi SETELAH di-scroll */
        #main-header.scrolled {
            padding-top: 0.5rem; /* Sedikit lebih ramping saat scroll */
            padding-bottom: 0.5rem;

            /* Solid saat scroll ke bawah */
            background-color:rgb(34 197 94); /* Warna tema Anda (emerald-800) */
            
            /* Beri bayangan agar ada pemisah dengan konten */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }
    </style>

    <div class="flex flex-row justify-between items-center max-w-7xl mx-auto w-full px-4">
        
        <a href='{{ absURL "/" }}' class="flex items-center gap-3">
            <img src='{{ absURL "kalbar-logo.png" }}' alt="{{ .Site.Title }} Logo" class="h-10 w-auto" />
            <span class="text-xl font-bold text-white hover:text-green-200 dark:hover:text-yellow-400">{{ .Site.Title }}</span>
        </a>

        <button id="mobile-menu-button" class="md:hidden text-white hover:text-green-200 dark:hover:text-yellow-400">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <line x1="4" y1="6" x2="20" y2="6" />
                <line x1="4" y1="12" x2="20" y2="12" />
                <line x1="4" y1="18" x2="20" y2="18" />
            </svg>
        </button>

        <nav id="mobile-menu" class="hidden md:flex items-center gap-4 text-sm font-medium text-gray-100">
            <a href='{{ absURL "/" }}' class="px-3 py-2 hover:text-white hover:bg-white/10 rounded-md">Beranda</a>
            {{ range .Site.Menus.main }}
                {{ if .HasChildren }}
                    <div class="relative group">
                        <button class="flex items-center gap-1 px-3 py-2 hover:text-white hover:bg-white/10 rounded-md">
                            <span>{{ .Name }}</span>
                            <svg class="w-4 h-4 transition-transform duration-200 group-hover:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        </button>
                        <div class="absolute top-full mt-2 w-52 bg-white dark:bg-gray-800 shadow-lg rounded-md hidden group-hover:block border border-gray-200 dark:border-gray-700">
                            {{ range .Children }}
                                <a class="block px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" href="{{ .URL }}">{{ .Name }}</a>
                            {{ end }}
                        </div>
                    </div>
                {{ else }}
                    <a class="px-3 py-2 hover:text-white hover:bg-white/10 rounded-md" href="{{ .URL }}">{{ .Name }}</a>
                {{ end }}
            {{ end }}

            {{ if .Site.Params.darkModeToggle }}
                <button class="toggle-dark-mode ml-4 p-2 rounded-full hover:bg-white/10">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" /></svg>
                </button>
            {{ end }}
        </nav>
    </div>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const header = document.getElementById('main-header');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        // 1. Efek Transparan saat Scroll
        if (header) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 10) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        }

        // 2. Fungsi Toggle Menu Mobile
        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', () => {
                // Ini akan menampilkan/menyembunyikan menu pada layar mobile
                mobileMenu.classList.toggle('hidden');
            });
        }
    });
</script>
