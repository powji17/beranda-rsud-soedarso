<header id="main-header" class="flex flex-wrap justify-between items-center mx-auto top-0 z-50 w-full transition-all duration-300">
    <style>
        /* CSS yang lebih spesifik untuk header transparan di kondisi awal */
        #main-header:not(.scrolled) {
            position: fixed;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            background-color: transparent !important;
            box-shadow: none !important;
        }

        /* CSS untuk header setelah di-scroll */
        #main-header.scrolled {
            position: fixed;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            background-color: rgb(34 197 94) !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15) !important;
        }

        /* Aturan untuk memastikan warna teks berubah dengan benar */
        #main-header:not(.scrolled) #header-title,
        #main-header:not(.scrolled) nav a,
        #main-header:not(.scrolled) nav button {
            color: white !important;
        }

        #main-header.scrolled #header-title,
        #main-header.scrolled nav a,
        #main-header.scrolled nav button {
            color: black !important;
        }

        #main-header:not(.scrolled) #mobile-menu-button svg {
            color: white !important;
        }

        #main-header.scrolled #mobile-menu-button svg {
            color: black !important;
        }
    </style>

    <div class="flex flex-row justify-between items-center max-w-7xl mx-auto w-full px-4">
        
        <a href='{{ absURL "/" }}' class="flex items-center gap-3">
            <div id="header-logo-container" class="flex items-center gap-3 transition-opacity duration-300">
                <img id="header-logo-img" src='{{ absURL "kalbar-logo.png" }}' alt="{{ .Site.Title }} Logo" class="h-10 w-auto" />
                <h2 id="header-title" class="text-xl font-bold transition-colors duration-300">Rumah Sakit Umum Daerah dr.Soedarso</h2>
            </div>
        </a>

        <button id="mobile-menu-button" class="md:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <line x1="4" y1="6" x2="20" y2="6" />
                <line x1="4" y1="12" x2="20" y2="12" />
                <line x1="4" y1="18" x2="20" y2="18" />
            </svg>
        </button>

        <nav id="mobile-menu" class="hidden md:flex items-center gap-4 text-sm font-medium">
            <a href='{{ absURL "/" }}' class="px-3 py-2 hover:bg-white/10 rounded-md">Beranda</a>
            {{ range .Site.Menus.main }}
                {{ if .HasChildren }}
                    <div class="relative group">
                        <button class="flex items-center gap-1 px-3 py-2 hover:bg-white/10 rounded-md">
                            <span>{{ .Name }}</span>
                            <svg class="w-4 h-4 transition-transform duration-200 group-hover:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        </button>
                        <div class="absolute top-full mt-2 w-52 bg-white dark:bg-gray-800 shadow-lg rounded-md hidden group-hover:block border border-gray-200 dark:border-gray-700">
                            {{ range .Children }}
                                <a class="block px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" href="{{ .URL }}">{{ .Name }}</a>
                            {{ end }}
                        </div>
                    </div>
                {{ else }}
                    <a class="px-3 py-2 hover:bg-white/10 rounded-md" href="{{ .URL }}">{{ .Name }}</a>
                {{ end }}
            {{ end }}

            {{ if .Site.Params.darkModeToggle }}
                <button class="toggle-dark-mode ml-4 p-2 rounded-full hover:bg-white/10">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" /></svg>
                </button>
            {{ end }}
        </nav>
    </div>
</header>
